

<!DOCTYPE html>
<html>
<head>
    <title>Fancy Todo List</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            min-height: 100vh;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #a1c4fd, #c2e9fb);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        @keyframes gradientBG {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }
        .card {
            border-radius: 20px;
            backdrop-filter: blur(15px);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 8px 40px rgba(0,0,0,0.2);
            width: 500px;
        }
        .card-header {
            background: linear-gradient(90deg,#667eea,#764ba2);
            color: rosybrown!important;
            font-weight: bold;
}

        .list-group-item {
            border-radius: 10px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }
        .list-group-item:hover {
            transform: scale(1.02);
        }
        .category-badge {
            font-size: 0.7rem;
            padding: 3px 6px;
            border-radius: 5px;
        }
        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(10px);}
            to {opacity: 1; transform: translateY(0);}
        }
    </style>
</head>
<body>

<div class="card p-3 shadow-lg">
    <div class="card-header bg-gradient text-center text-white rounded-top" style="background: linear-gradient(90deg,#667eea,#764ba2)">
        <h3><i class="bi bi-journal-check"></i> My TaskMate</h3>
    </div>
    <div class="card-body">
        <!-- Search Bar -->
        <input type="text" id="search" class="form-control mb-3" placeholder="Search tasks...">

        <!-- Input Row -->
        <div class="input-group mb-3">
            <input id="input" type="text" class="form-control" placeholder="Enter your task...">
            <select id="category" class="form-select" style="max-width: 120px;">
                <option value="Work">Work</option>
                <option value="Personal">Personal</option>
                <option value="Urgent">Urgent</option>
            </select>
            <button onclick="Add()" class="btn btn-success"><i class="bi bi-plus-lg"></i></button>
        </div>

        <!-- Progress Bar -->
        <div class="progress mb-3">
            <div id="progress-bar" class="progress-bar bg-info" role="progressbar" style="width: 0%">0%</div>
        </div>

        <!-- Task List -->
        <ul id="list-container" class="list-group"></ul>

        <button onclick="clearAll()" class="btn btn-danger mt-3 w-100"><i class="bi bi-trash"></i> Clear All</button>
    </div>
</div>

<script>
    var input = document.getElementById("input");
    var ul = document.getElementById("list-container");
    var search = document.getElementById("search");
    var categorySelect = document.getElementById("category");
    var progressBar = document.getElementById("progress-bar");

    window.onload = function() {
        if (localStorage.getItem("tasks")) {
            ul.innerHTML = localStorage.getItem("tasks");
        }
        updateProgress();
    }

    function saveTasks() {
        localStorage.setItem("tasks", ul.innerHTML);
        updateProgress();
    }

    function Add() {
        if (input.value.trim() === "") {
            Swal.fire("Oops!", "Please enter a task!", "warning");
            return;
        }
        var listitem = document.createElement("li");
        listitem.className = "list-group-item fade-in";

        let now = new Date();
        let timeString = now.toLocaleString();
        let category = categorySelect.value;
        let badgeColor = category === "Work" ? "primary" : category === "Personal" ? "success" : "danger";

        listitem.innerHTML = `
            <div>
                <span>${input.value}</span>
                <span class="badge bg-${badgeColor} category-badge">${category}</span>
                <div class="text-muted" style="font-size:0.8rem">${timeString}</div>
            </div>
            <div>
                <button class="btn btn-success btn-sm me-2" onclick="markDone(event)"><i class="bi bi-check-lg"></i></button>
                <button class="btn btn-warning btn-sm me-2" onclick="editItem(event)"><i class="bi bi-pencil-square"></i></button>
                <button class="btn btn-danger btn-sm" onclick="deleteItem(event)"><i class="bi bi-trash"></i></button>
            </div>
        `;
        ul.append(listitem);
        input.value = "";
        saveTasks();
    }

    function deleteItem(event) {
        Swal.fire({
            title: 'Delete Task?',
            text: "You can't undo this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Delete'
        }).then((result) => {
            if (result.isConfirmed) {
                event.target.closest("li").remove();
                saveTasks();
            }
        });
    }

    function markDone(event) {
        let taskText = event.target.closest("li").querySelector("span");
        taskText.style.textDecoration = taskText.style.textDecoration === "line-through" ? "none" : "line-through";
        saveTasks();
    }

    function editItem(event) {
        let taskText = event.target.closest("li").querySelector("span");
        Swal.fire({
            title: 'Edit Task',
            input: 'text',
            inputValue: taskText.innerText,
            showCancelButton: true
        }).then((result) => {
            if (result.value) {
                taskText.innerText = result.value;
                saveTasks();
            }
        });
    }

    function clearAll() {
        Swal.fire({
            title: 'Clear All Tasks?',
            text: "This will remove all tasks.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Yes, clear it!'
        }).then((result) => {
            if (result.isConfirmed) {
                ul.innerHTML = "";
                saveTasks();
            }
        });
    }

    function updateProgress() {
        let total = ul.querySelectorAll("li").length;
        let done = ul.querySelectorAll("li span[style*='line-through']").length;
        let percent = total === 0 ? 0 : Math.round((done / total) * 100);
        progressBar.style.width = percent + "%";
        progressBar.innerText = percent + "%";
    }

    // Search filter
    search.addEventListener("keyup", function() {
        let filter = search.value.toLowerCase();
        let tasks = ul.getElementsByTagName("li");
        Array.from(tasks).forEach(function(task) {
            let text = task.textContent.toLowerCase();
            task.style.display = text.includes(filter) ? "" : "none";
        });
    });

    // Add task on Enter key
    input.addEventListener("keypress", function(e) {
        if (e.key === "Enter") Add();
    });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
